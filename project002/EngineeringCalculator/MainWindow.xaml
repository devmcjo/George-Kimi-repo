<Window x:Class="EngineeringCalculator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="공학용 계산기" Height="600" Width="500"
        ResizeMode="CanMinimize" WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 디스플레이 -->
        <Border Grid.Row="0" Background="#FFEEEEEE" BorderBrush="#FFCCCCCC" BorderThickness="1" Margin="10">
            <TextBlock x:Name="DisplayText" Text="0" FontSize="36" HorizontalAlignment="Right" 
                       VerticalAlignment="Center" Margin="10" TextWrapping="Wrap"/>
        </Border>
        
        <!-- 수식 표시 -->
        <TextBlock Grid.Row="1" x:Name="FormulaText" Text="" FontSize="14" Foreground="Gray" 
                   HorizontalAlignment="Right" Margin="10,0,10,5"/>
        
        <!-- 버튼 영역 -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Row 0: 공학 함수 -->
            <Button Grid.Row="0" Grid.Column="0" Content="sin" Click="FunctionButton_Click" Tag="sin"/>
            <Button Grid.Row="0" Grid.Column="1" Content="cos" Click="FunctionButton_Click" Tag="cos"/>
            <Button Grid.Row="0" Grid.Column="2" Content="tan" Click="FunctionButton_Click" Tag="tan"/>
            <Button Grid.Row="0" Grid.Column="3" Content="log" Click="FunctionButton_Click" Tag="log"/>
            <Button Grid.Row="0" Grid.Column="4" Content="ln" Click="FunctionButton_Click" Tag="ln"/>
            
            <!-- Row 1: 추가 함수 -->
            <Button Grid.Row="1" Grid.Column="0" Content="√" Click="FunctionButton_Click" Tag="sqrt"/>
            <Button Grid.Row="1" Grid.Column="1" Content="x²" Click="FunctionButton_Click" Tag="pow2"/>
            <Button Grid.Row="1" Grid.Column="2" Content="xʸ" Click="OperationButton_Click" Tag="^"/>
            <Button Grid.Row="1" Grid.Column="3" Content="π" Click="ConstantButton_Click" Tag="pi"/>
            <Button Grid.Row="1" Grid.Column="4" Content="e" Click="ConstantButton_Click" Tag="e"/>
            
            <!-- Row 2: C, ←, /, *, ( -->
            <Button Grid.Row="2" Grid.Column="0" Content="C" Click="ClearButton_Click" Background="#FFFF6B6B" Foreground="White"/>
            <Button Grid.Row="2" Grid.Column="1" Content="←" Click="BackspaceButton_Click"/>
            <Button Grid.Row="2" Grid.Column="2" Content="(" Click="BracketButton_Click" Tag="("/>
            <Button Grid.Row="2" Grid.Column="3" Content=")" Click="BracketButton_Click" Tag=")"/>
            <Button Grid.Row="2" Grid.Column="4" Content="÷" Click="OperationButton_Click" Tag="/"/>
            
            <!-- Row 3: 7, 8, 9, *, ) -->
            <Button Grid.Row="3" Grid.Column="0" Content="7" Click="NumberButton_Click"/>
            <Button Grid.Row="3" Grid.Column="1" Content="8" Click="NumberButton_Click"/>
            <Button Grid.Row="3" Grid.Column="2" Content="9" Click="NumberButton_Click"/>
            <Button Grid.Row="3" Grid.Column="3" Content="×" Click="OperationButton_Click" Tag="*"/>
            <Button Grid.Row="3" Grid.Column="4" Content="%" Click="OperationButton_Click" Tag="%"/>
            
            <!-- Row 4: 4, 5, 6, - -->
            <Button Grid.Row="4" Grid.Column="0" Content="4" Click="NumberButton_Click"/>
            <Button Grid.Row="4" Grid.Column="1" Content="5" Click="NumberButton_Click"/>
            <Button Grid.Row="4" Grid.Column="2" Content="6" Click="NumberButton_Click"/>
            <Button Grid.Row="4" Grid.Column="3" Content="-" Click="OperationButton_Click" Tag="-"/>
            <Button Grid.Row="4" Grid.Column="4" Content="1/x" Click="FunctionButton_Click" Tag="inv"/>
            
            <!-- Row 5: 1, 2, 3, + -->
            <Button Grid.Row="5" Grid.Column="0" Content="1" Click="NumberButton_Click"/>
            <Button Grid.Row="5" Grid.Column="1" Content="2" Click="NumberButton_Click"/>
            <Button Grid.Row="5" Grid.Column="2" Content="3" Click="NumberButton_Click"/>
            <Button Grid.Row="5" Grid.Column="3" Content="+" Click="OperationButton_Click" Tag="+"/>
            <Button Grid.Row="5" Grid.Column="4" Content="=" Click="EqualsButton_Click" Background="#FF4CAF50" Foreground="White"/>
            
            <!-- Row 6: 0, . -->
            <Button Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2" Content="0" Click="NumberButton_Click"/>
            <Button Grid.Row="6" Grid.Column="2" Content="." Click="DecimalButton_Click"/>
            <Button Grid.Row="6" Grid.Column="3" Content="±" Click="SignButton_Click"/>
            <Button Grid.Row="6" Grid.Column="4" Content="Hist" Click="HistoryToggleButton_Click" Background="#FF2196F3" Foreground="White"/>
        </Grid>
        
        <!-- 히스토리 패널 -->
        <Border Grid.Row="3" x:Name="HistoryPanel" Background="#FFF5F5F5" BorderBrush="#FFCCCCCC" 
                BorderThickness="1" Margin="10" Height="0" Visibility="Collapsed">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="히스토리 (최근 20개)" FontWeight="Bold" Margin="5"/>
                <ListBox Grid.Row="1" x:Name="HistoryListBox" Margin="5" Height="120"
                         SelectionChanged="HistoryListBox_SelectionChanged"/>
            </Grid>
        </Border>
    </Grid>
</Window>
